# Chat4 Windows一键安装部署包

## 概述

这是一个完整的Windows一键安装部署包，用于快速部署Chat4虚拟角色聊天室应用。支持云端API和本地AI模型，提供多种安装方式。

## 功能特性

### 🎯 核心功能
- **一键安装**: 自动检测环境，下载依赖，配置服务
- **智能检测**: 自动检测Node.js、Git、Ollama等依赖
- **灵活配置**: 支持云端API和本地AI模型
- **服务管理**: 支持Windows服务安装和管理
- **便携模式**: 无需安装，直接运行的便携版本

### 🤖 AI模型支持
- **云端API**: Z.ai、OpenAI等云端API服务
- **本地模型**: Ollama本地大模型支持
- **混合模式**: 同时支持云端和本地模型
- **自动下载**: 自动下载推荐的AI模型

### 🛠️ 管理功能
- **配置向导**: 图形化配置界面
- **服务管理**: Windows服务安装和管理
- **日志监控**: 完整的日志记录和监控
- **备份恢复**: 数据库备份和恢复功能

## 安装方式

### 1. 标准安装 (推荐)

```bash
# 以管理员身份运行
install.bat
```

**特点:**
- 安装到Program Files目录
- 创建Windows服务
- 添加桌面快捷方式
- 支持自动启动

### 2. 服务安装

```bash
# 安装为Windows服务
install-service.bat
```

**特点:**
- 后台运行服务
- 自动重启功能
- 系统级服务管理

### 3. 便携版

```bash
# 无需安装，直接运行
portable.bat
```

**特点:**
- 无需管理员权限
- 数据保存在本地目录
- 可直接复制到其他电脑

## 配置选项

### AI模型配置

安装过程中可以选择AI模型配置:

1. **云端API模式** (推荐)
   - 使用Z.ai、OpenAI等云端API
   - 无需本地大模型
   - 配置简单，即开即用

2. **本地Ollama模式**
   - 使用本地Ollama模型
   - 完全本地运行，隐私性好
   - 需要下载AI模型文件

3. **混合模式**
   - 同时支持云端和本地模型
   - 灵活切换不同模型
   - 最佳的性能和隐私平衡

### 网络配置

- **端口设置**: 自定义服务端口 (默认3000)
- **访问控制**: 本地访问或网络访问
- **IP白名单**: 限制访问IP地址
- **HTTPS支持**: 支持SSL证书配置

### 数据库配置

- **SQLite**: 轻量级本地数据库
- **备份恢复**: 自动备份和恢复功能
- **数据迁移**: 支持数据迁移和升级

## 使用方法

### 启动服务

```bash
# 标准安装后启动
start.bat

# 服务方式启动
net start Chat4

# 便携版启动
portable.bat
```

### 配置管理

```bash
# 运行配置向导
config-wizard.bat

# 查看配置状态
type .env
```

### 服务管理

```bash
# 启动服务
net start Chat4

# 停止服务
net stop Chat4

# 重启服务
net stop Chat4 && net start Chat4

# 删除服务
sc delete Chat4
```

## 文件结构

```
Chat4/
├── install.bat              # 主安装脚本
├── install-service.bat       # 服务安装脚本
├── config-wizard.bat         # 配置向导
├── portable.bat              # 便携版启动脚本
├── start.bat                 # 启动脚本
├── stop.bat                  # 停止脚本
├── uninstall.bat             # 卸载脚本
├── .env                      # 环境配置文件
├── node_modules/             # 依赖包
├── db/                       # 数据库文件
├── storage/                  # 存储文件
├── logs/                     # 日志文件
├── public/                   # 静态文件
└── docs/                     # 文档
```

## 系统要求

### 最低要求
- **操作系统**: Windows 10/11
- **内存**: 4GB RAM
- **存储**: 2GB 可用空间
- **网络**: 互联网连接 (用于下载依赖)

### 推荐配置
- **操作系统**: Windows 10/11 (64位)
- **内存**: 8GB RAM 或更多
- **存储**: 5GB 可用空间
- **CPU**: 4核心或更多
- **网络**: 稳定的互联网连接

### 本地AI模型要求
- **GPU**: NVIDIA GPU (推荐，可选)
- **显存**: 8GB 或更多 (用于7B模型)
- **内存**: 16GB RAM 或更多

## 故障排除

### 常见问题

1. **权限不足**
   - 确保以管理员身份运行安装脚本
   - 检查用户账户控制(UAC)设置

2. **端口占用**
   - 检查3000端口是否被占用
   - 修改.env文件中的PORT设置

3. **依赖安装失败**
   - 检查网络连接
   - 尝试使用国内npm镜像
   - 手动安装Node.js

4. **服务启动失败**
   - 检查日志文件: logs/service.log
   - 确认数据库文件存在
   - 检查环境变量配置

### 日志文件

- **安装日志**: `data/install.log`
- **服务日志**: `logs/service.log`
- **错误日志**: `logs/service-error.log`
- **应用日志**: `logs/app.log`

## 安全说明

### 数据安全
- 所有配置文件存储在本地
- API密钥加密存储
- 支持数据库备份和恢复

### 网络安全
- 支持HTTPS配置
- 可配置IP白名单
- 建议在生产环境中使用防火墙

### 隐私保护
- 本地模式数据不离开本地
- 云端模式仅传输必要数据
- 支持完全离线运行

## 更新维护

### 自动更新
```bash
# 检查更新
check-update.bat

# 执行更新
update.bat
```

### 手动更新
1. 备份数据库和配置文件
2. 下载最新版本
3. 运行安装脚本
4. 恢复配置文件

## 技术支持

### 文档资源
- [用户使用指南](docs/用户使用指南.md)
- [项目设置指南](docs/项目设置指南.md)
- [API文档](docs/api/rest-api.md)

### 社区支持
- GitHub Issues
- 技术交流群
- 邮件支持

### 联系方式
- 项目主页: https://github.com/your-repo/chat4
- 问题反馈: issues@your-domain.com
- 技术支持: support@your-domain.com

## 许可证

本项目采用 MIT 许可证，详见 [LICENSE](LICENSE) 文件。

## 版本历史

### v1.0.0 (2024-01-01)
- 初始版本发布
- 支持Windows一键安装
- 集成云端和本地AI模型
- 完整的服务管理功能