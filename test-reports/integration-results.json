{"numFailedTestSuites":2,"numFailedTests":19,"numPassedTestSuites":0,"numPassedTests":0,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":1,"numTodoTests":0,"numTotalTestSuites":2,"numTotalTests":19,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1755143240257,"success":false,"testResults":[{"assertionResults":[],"coverage":{},"endTime":1755143269153,"message":"  ● Test suite failed to run\n\n    Cannot find module 'socket.io-client' from 'tests/integration/socket-realtime.test.ts'\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m  6 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m \u001b[36mimport\u001b[39m { io\u001b[33m,\u001b[39m \u001b[33mSocket\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'socket.io-client'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[36mimport\u001b[39m { createServer } \u001b[36mfrom\u001b[39m \u001b[32m'http'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m  9 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mServer\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'socket.io'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mAddressInfo\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'net'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)\n      at Object.<anonymous> (tests/integration/socket-realtime.test.ts:7:1)\n","name":"F:\\Chat4\\tests\\integration\\socket-realtime.test.ts","startTime":1755143269153,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["AI Service Integration Tests","🎯 ZAI API集成测试"],"duration":12,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: chatService.generateAIResponse is not a function\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:62:40)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 🎯 ZAI API集成测试 成功调用ZAI API - 应返回标准响应格式","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268801,"status":"failed","title":"成功调用ZAI API - 应返回标准响应格式"},{"ancestorTitles":["AI Service Integration Tests","🎯 ZAI API集成测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: chatService.generateAIResponse is not a function\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:93:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 🎯 ZAI API集成测试 API参数验证 - 完整参数传递","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268848,"status":"failed","title":"API参数验证 - 完整参数传递"},{"ancestorTitles":["AI Service Integration Tests","🎯 ZAI API集成测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: chatService.generateAIResponse is not a function\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:119:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 🎯 ZAI API集成测试 API响应时间性能基准","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268851,"status":"failed","title":"API响应时间性能基准"},{"ancestorTitles":["AI Service Integration Tests","🔄 故障恢复和降级机制测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:129:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 🔄 故障恢复和降级机制测试 网络连接失败 - 启用演示模式","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268853,"status":"failed","title":"网络连接失败 - 启用演示模式"},{"ancestorTitles":["AI Service Integration Tests","🔄 故障恢复和降级机制测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:150:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 🔄 故障恢复和降级机制测试 API超时处理 - 应优雅降级","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268855,"status":"failed","title":"API超时处理 - 应优雅降级"},{"ancestorTitles":["AI Service Integration Tests","🔄 故障恢复和降级机制测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:171:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 🔄 故障恢复和降级机制测试 API限流(429)处理 - 应触发降级","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268857,"status":"failed","title":"API限流(429)处理 - 应触发降级"},{"ancestorTitles":["AI Service Integration Tests","🔄 故障恢复和降级机制测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:193:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 🔄 故障恢复和降级机制测试 API服务不可用(503)处理","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268859,"status":"failed","title":"API服务不可用(503)处理"},{"ancestorTitles":["AI Service Integration Tests","🔄 故障恢复和降级机制测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:214:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 🔄 故障恢复和降级机制测试 无效API密钥处理 - 401错误","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268861,"status":"failed","title":"无效API密钥处理 - 401错误"},{"ancestorTitles":["AI Service Integration Tests","⚡ 限流和重试机制测试"],"duration":2,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:237:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests ⚡ 限流和重试机制测试 指数退避重试策略","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268862,"status":"failed","title":"指数退避重试策略"},{"ancestorTitles":["AI Service Integration Tests","⚡ 限流和重试机制测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:264:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests ⚡ 限流和重试机制测试 重试次数限制 - 最大3次重试","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268865,"status":"failed","title":"重试次数限制 - 最大3次重试"},{"ancestorTitles":["AI Service Integration Tests","💾 缓存策略测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:285:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 💾 缓存策略测试 相同请求应使用缓存","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268867,"status":"failed","title":"相同请求应使用缓存"},{"ancestorTitles":["AI Service Integration Tests","💾 缓存策略测试"],"duration":0,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:306:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 💾 缓存策略测试 缓存过期机制","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268869,"status":"failed","title":"缓存过期机制"},{"ancestorTitles":["AI Service Integration Tests","💾 缓存策略测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:328:26)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 💾 缓存策略测试 不同参数应触发独立缓存","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268870,"status":"failed","title":"不同参数应触发独立缓存"},{"ancestorTitles":["AI Service Integration Tests","🎯 业务场景集成测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:346:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 🎯 业务场景集成测试 完整对话流程 - 用户到AI响应","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268872,"status":"failed","title":"完整对话流程 - 用户到AI响应"},{"ancestorTitles":["AI Service Integration Tests","🎯 业务场景集成测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:382:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 🎯 业务场景集成测试 多轮对话上下文保持","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268874,"status":"failed","title":"多轮对话上下文保持"},{"ancestorTitles":["AI Service Integration Tests","📊 性能基准测试"],"duration":0,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:410:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 📊 性能基准测试 单次API调用响应时间<5秒","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268876,"status":"failed","title":"单次API调用响应时间<5秒"},{"ancestorTitles":["AI Service Integration Tests","📊 性能基准测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:428:9\n    at Function.from (<anonymous>)\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:427:32)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 📊 性能基准测试 批量请求性能测试 - 10个并发请求","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268877,"status":"failed","title":"批量请求性能测试 - 10个并发请求"},{"ancestorTitles":["AI Service Integration Tests","🔍 错误日志和监控测试"],"duration":0,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:453:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 🔍 错误日志和监控测试 API错误应记录详细日志","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268880,"status":"failed","title":"API错误应记录详细日志"},{"ancestorTitles":["AI Service Integration Tests","🔍 错误日志和监控测试"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["ReferenceError: createMockCharacter is not defined\n    at Object.<anonymous> (F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts:467:25)\n    at Promise.finally.completed (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (F:\\Chat4\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (F:\\Chat4\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (F:\\Chat4\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"AI Service Integration Tests 🔍 错误日志和监控测试 性能指标收集","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1755143268881,"status":"failed","title":"性能指标收集"}],"endTime":1755143269036,"message":"  ● AI Service Integration Tests › 🎯 ZAI API集成测试 › 成功调用ZAI API - 应返回标准响应格式\n\n    TypeError: chatService.generateAIResponse is not a function\n\n    \u001b[0m \u001b[90m 60 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 61 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 62 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m chatService\u001b[33m.\u001b[39mgenerateAIResponse(character\u001b[33m,\u001b[39m message\u001b[33m,\u001b[39m context)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 63 |\u001b[39m\n     \u001b[90m 64 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'response'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'confidence'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:62:40)\n\n  ● AI Service Integration Tests › 🎯 ZAI API集成测试 › API参数验证 - 完整参数传递\n\n    TypeError: chatService.generateAIResponse is not a function\n\n    \u001b[0m \u001b[90m 91 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 93 |\u001b[39m       \u001b[36mawait\u001b[39m chatService\u001b[33m.\u001b[39mgenerateAIResponse(\n     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 94 |\u001b[39m         character\u001b[33m,\u001b[39m\n     \u001b[90m 95 |\u001b[39m         \u001b[32m'什么是深度学习？'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 96 |\u001b[39m         \u001b[32m'教育科普场景'\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:93:25)\n\n  ● AI Service Integration Tests › 🎯 ZAI API集成测试 › API响应时间性能基准\n\n    TypeError: chatService.generateAIResponse is not a function\n\n    \u001b[0m \u001b[90m 117 |\u001b[39m\n     \u001b[90m 118 |\u001b[39m       \u001b[36mconst\u001b[39m startTime \u001b[33m=\u001b[39m \u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 119 |\u001b[39m       \u001b[36mawait\u001b[39m chatService\u001b[33m.\u001b[39mgenerateAIResponse(character\u001b[33m,\u001b[39m \u001b[32m'测试消息'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'测试场景'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 120 |\u001b[39m       \u001b[36mconst\u001b[39m endTime \u001b[33m=\u001b[39m \u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\n     \u001b[90m 121 |\u001b[39m\n     \u001b[90m 122 |\u001b[39m       \u001b[36mconst\u001b[39m responseTime \u001b[33m=\u001b[39m endTime \u001b[33m-\u001b[39m startTime\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:119:25)\n\n  ● AI Service Integration Tests › 🔄 故障恢复和降级机制测试 › 网络连接失败 - 启用演示模式\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 127 |\u001b[39m   describe(\u001b[32m'🔄 故障恢复和降级机制测试'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 128 |\u001b[39m     test(\u001b[32m'网络连接失败 - 启用演示模式'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 129 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 130 |\u001b[39m\n     \u001b[90m 131 |\u001b[39m       \u001b[90m// 模拟网络连接失败\u001b[39m\n     \u001b[90m 132 |\u001b[39m       mockFetch\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Network Error'\u001b[39m))\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:129:25)\n\n  ● AI Service Integration Tests › 🔄 故障恢复和降级机制测试 › API超时处理 - 应优雅降级\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 148 |\u001b[39m\n     \u001b[90m 149 |\u001b[39m     test(\u001b[32m'API超时处理 - 应优雅降级'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 150 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 151 |\u001b[39m\n     \u001b[90m 152 |\u001b[39m       \u001b[90m// 模拟API超时\u001b[39m\n     \u001b[90m 153 |\u001b[39m       mockFetch\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:150:25)\n\n  ● AI Service Integration Tests › 🔄 故障恢复和降级机制测试 › API限流(429)处理 - 应触发降级\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 169 |\u001b[39m\n     \u001b[90m 170 |\u001b[39m     test(\u001b[32m'API限流(429)处理 - 应触发降级'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 171 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 172 |\u001b[39m\n     \u001b[90m 173 |\u001b[39m       \u001b[90m// 模拟429限流响应\u001b[39m\n     \u001b[90m 174 |\u001b[39m       mockFetch\u001b[33m.\u001b[39mmockResolvedValue({\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:171:25)\n\n  ● AI Service Integration Tests › 🔄 故障恢复和降级机制测试 › API服务不可用(503)处理\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 191 |\u001b[39m\n     \u001b[90m 192 |\u001b[39m     test(\u001b[32m'API服务不可用(503)处理'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 193 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 194 |\u001b[39m\n     \u001b[90m 195 |\u001b[39m       mockFetch\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m 196 |\u001b[39m         ok\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:193:25)\n\n  ● AI Service Integration Tests › 🔄 故障恢复和降级机制测试 › 无效API密钥处理 - 401错误\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 212 |\u001b[39m\n     \u001b[90m 213 |\u001b[39m     test(\u001b[32m'无效API密钥处理 - 401错误'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 214 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 215 |\u001b[39m\n     \u001b[90m 216 |\u001b[39m       mockFetch\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m 217 |\u001b[39m         ok\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:214:25)\n\n  ● AI Service Integration Tests › ⚡ 限流和重试机制测试 › 指数退避重试策略\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 235 |\u001b[39m   describe(\u001b[32m'⚡ 限流和重试机制测试'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 236 |\u001b[39m     test(\u001b[32m'指数退避重试策略'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 237 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 238 |\u001b[39m       \u001b[36mlet\u001b[39m attemptCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 239 |\u001b[39m\n     \u001b[90m 240 |\u001b[39m       mockFetch\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:237:25)\n\n  ● AI Service Integration Tests › ⚡ 限流和重试机制测试 › 重试次数限制 - 最大3次重试\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 262 |\u001b[39m\n     \u001b[90m 263 |\u001b[39m     test(\u001b[32m'重试次数限制 - 最大3次重试'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 264 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 265 |\u001b[39m       \u001b[36mlet\u001b[39m retryCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 266 |\u001b[39m\n     \u001b[90m 267 |\u001b[39m       mockFetch\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:264:25)\n\n  ● AI Service Integration Tests › 💾 缓存策略测试 › 相同请求应使用缓存\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 283 |\u001b[39m   describe(\u001b[32m'💾 缓存策略测试'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 284 |\u001b[39m     test(\u001b[32m'相同请求应使用缓存'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 285 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 286 |\u001b[39m       \u001b[36mconst\u001b[39m message \u001b[33m=\u001b[39m \u001b[32m'缓存测试消息'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 287 |\u001b[39m       \u001b[36mconst\u001b[39m context \u001b[33m=\u001b[39m \u001b[32m'缓存测试场景'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 288 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:285:25)\n\n  ● AI Service Integration Tests › 💾 缓存策略测试 › 缓存过期机制\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 304 |\u001b[39m\n     \u001b[90m 305 |\u001b[39m     test(\u001b[32m'缓存过期机制'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 306 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 307 |\u001b[39m       \u001b[36mconst\u001b[39m message \u001b[33m=\u001b[39m \u001b[32m'过期测试'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 308 |\u001b[39m\n     \u001b[90m 309 |\u001b[39m       mockFetch\u001b[33m.\u001b[39mmockResolvedValue({\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:306:25)\n\n  ● AI Service Integration Tests › 💾 缓存策略测试 › 不同参数应触发独立缓存\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 326 |\u001b[39m\n     \u001b[90m 327 |\u001b[39m     test(\u001b[32m'不同参数应触发独立缓存'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 328 |\u001b[39m       \u001b[36mconst\u001b[39m character1 \u001b[33m=\u001b[39m createMockCharacter({ name\u001b[33m:\u001b[39m \u001b[32m'角色1'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 329 |\u001b[39m       \u001b[36mconst\u001b[39m character2 \u001b[33m=\u001b[39m createMockCharacter({ name\u001b[33m:\u001b[39m \u001b[32m'角色2'\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 330 |\u001b[39m\n     \u001b[90m 331 |\u001b[39m       mockFetch\u001b[33m.\u001b[39mmockResolvedValue({\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:328:26)\n\n  ● AI Service Integration Tests › 🎯 业务场景集成测试 › 完整对话流程 - 用户到AI响应\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 344 |\u001b[39m   describe(\u001b[32m'🎯 业务场景集成测试'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 345 |\u001b[39m     test(\u001b[32m'完整对话流程 - 用户到AI响应'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 346 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter({\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 347 |\u001b[39m         name\u001b[33m:\u001b[39m \u001b[32m'AI助手'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 348 |\u001b[39m         personality\u001b[33m:\u001b[39m \u001b[32m'友好、专业、耐心'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 349 |\u001b[39m         background\u001b[33m:\u001b[39m \u001b[32m'AI技术专家'\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:346:25)\n\n  ● AI Service Integration Tests › 🎯 业务场景集成测试 › 多轮对话上下文保持\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 380 |\u001b[39m\n     \u001b[90m 381 |\u001b[39m     test(\u001b[32m'多轮对话上下文保持'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 382 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 383 |\u001b[39m       \u001b[36mconst\u001b[39m conversation \u001b[33m=\u001b[39m [\n     \u001b[90m 384 |\u001b[39m         { message\u001b[33m:\u001b[39m \u001b[32m'你好'\u001b[39m\u001b[33m,\u001b[39m context\u001b[33m:\u001b[39m \u001b[32m'开场问候'\u001b[39m }\u001b[33m,\u001b[39m\n     \u001b[90m 385 |\u001b[39m         { message\u001b[33m:\u001b[39m \u001b[32m'什么是AI？'\u001b[39m\u001b[33m,\u001b[39m context\u001b[33m:\u001b[39m \u001b[32m'技术询问'\u001b[39m }\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:382:25)\n\n  ● AI Service Integration Tests › 📊 性能基准测试 › 单次API调用响应时间<5秒\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 408 |\u001b[39m   describe(\u001b[32m'📊 性能基准测试'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 409 |\u001b[39m     test(\u001b[32m'单次API调用响应时间<5秒'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 410 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 411 |\u001b[39m\n     \u001b[90m 412 |\u001b[39m       mockFetch\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m 413 |\u001b[39m         ok\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:410:25)\n\n  ● AI Service Integration Tests › 📊 性能基准测试 › 批量请求性能测试 - 10个并发请求\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 426 |\u001b[39m     test(\u001b[32m'批量请求性能测试 - 10个并发请求'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 427 |\u001b[39m       \u001b[36mconst\u001b[39m characters \u001b[33m=\u001b[39m \u001b[33mArray\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m({ length\u001b[33m:\u001b[39m \u001b[35m10\u001b[39m }\u001b[33m,\u001b[39m (_\u001b[33m,\u001b[39m i) \u001b[33m=>\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 428 |\u001b[39m         createMockCharacter({ name\u001b[33m:\u001b[39m \u001b[32m`测试角色${i}`\u001b[39m })\n     \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 429 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 430 |\u001b[39m\n     \u001b[90m 431 |\u001b[39m       mockFetch\u001b[33m.\u001b[39mmockResolvedValue({\u001b[0m\n\n      at tests/integration/ai-service-integration.test.ts:428:9\n          at Function.from (<anonymous>)\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:427:32)\n\n  ● AI Service Integration Tests › 🔍 错误日志和监控测试 › API错误应记录详细日志\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 451 |\u001b[39m   describe(\u001b[32m'🔍 错误日志和监控测试'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 452 |\u001b[39m     test(\u001b[32m'API错误应记录详细日志'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 453 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 454 |\u001b[39m       \u001b[36mconst\u001b[39m consoleSpy \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mspyOn(console\u001b[33m,\u001b[39m \u001b[32m'error'\u001b[39m)\u001b[33m.\u001b[39mmockImplementation()\u001b[33m;\u001b[39m\n     \u001b[90m 455 |\u001b[39m\n     \u001b[90m 456 |\u001b[39m       mockFetch\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'API Error Test'\u001b[39m))\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:453:25)\n\n  ● AI Service Integration Tests › 🔍 错误日志和监控测试 › 性能指标收集\n\n    ReferenceError: createMockCharacter is not defined\n\n    \u001b[0m \u001b[90m 465 |\u001b[39m\n     \u001b[90m 466 |\u001b[39m     test(\u001b[32m'性能指标收集'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 467 |\u001b[39m       \u001b[36mconst\u001b[39m character \u001b[33m=\u001b[39m createMockCharacter()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 468 |\u001b[39m\n     \u001b[90m 469 |\u001b[39m       mockFetch\u001b[33m.\u001b[39mmockResolvedValue({\n     \u001b[90m 470 |\u001b[39m         ok\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/ai-service-integration.test.ts:467:25)\n","name":"F:\\Chat4\\tests\\integration\\ai-service-integration.test.ts","startTime":1755143267109,"status":"failed","summary":""}],"wasInterrupted":false}
